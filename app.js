(()=>{function u(t){return document.getElementById(t).content.cloneNode(!0)}var f=document.querySelector(".js-infinite-pagination");function m(t,e,o,n="append"){let r=u(o),a=JSON.parse(f.dataset.elements),i=r.querySelector(".data-container");for(let p in a){let l=r.querySelector(a[p]);l.innerText=t[p],i.appendChild(l)}n==="append"?e.append(i):e.prepend(i)}async function g(t,e){(await(await fetch(e,{Accept:"application/json"})).json()).forEach(n=>{m(n,t,f.dataset.template)})}var s=class{constructor(e,o,n){this.name=e,this.email=o,this.body=n}};var c=document.querySelector(".js-infinite-pagination"),q=c.dataset.endpoint,h=document.querySelector(c.dataset.target),b=c.querySelector(".spinner-border"),d=!1,S=new IntersectionObserver(t=>{t.forEach(e=>{d!==!0&&e.isIntersecting&&(d=!0,g(h,q).then(()=>d=!1))})});S.observe(b);var y=document.querySelector(".js-form-fetch");y.addEventListener("submit",t=>{t.preventDefault();let e=new FormData(y),o=e.get("name"),n=e.get("email"),r=e.get("body"),a=new s(o,n,r);m(a,h,c.dataset.template,"prepend"),t.currentTarget.reset()});})();
